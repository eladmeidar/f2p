<%- if entry.orphan -%>
<%= pin_link(entry) -%>
<%= published(entry) -%>
  (Entry not found; deleted?)
<%- else -%>
<%- if root.nil? -%>
  <%= author_picture(entry) -%>
  <%= icon(entry) %><%= icon_extra(entry) -%>
  <%= author_link(entry) %>
  <%= published(entry, true) -%>
  <%= friends_likes(entry) -%><br />
  <%= pin_link(entry) -%>
<%- elsif !entry.same_feed?(root) -%>
  <%= pin_link(entry) -%>
  <%= author_picture(entry) if root.origin_nickname != entry.origin_nickname -%>
  <%= icon(entry) %><%= icon_extra(entry) -%>
  <%= author_link(entry) if root.origin_nickname != entry.origin_nickname %>
<%- else -%>
  <%= pin_link(entry) -%>
<%- end -%>
  <%= original_link(entry) -%>
<%= content(entry) %>
 <%= via(entry) %>
<%= published(entry, true) unless root.nil? -%>
<%- if comment_inline?(entry) -%>
  -- <span class="comment"><%= inline_comment(entry.comments.first) %></span>
<%- end -%>
<%= reshare_link(entry) -%>
<%= like_link(entry) -%>
<%= friends_likes(entry) unless root.nil? -%>
  <%- comments = fold_comments(entry.comments) -%>
  <%- if comments.empty? or comment_inline?(entry) or (comments.size == 1 and fold_item?(comments.first))-%>
<%= post_comment_link(entry, :show_comments_number => true) %>
  <%- else -%>
    <ul class="comment">
      <%- comments.each do |comment| -%>
        <%- if comment.respond_to?(:fold_entries) -%>
          <li><%= fold_comment_link(comment) %></li>
        <%- else -%>
          <li>
            <%= comment_icon(comment) %>
            <%= comment(comment) %> <%= comment_author_link(comment) %> <%= via(comment) %>
<%= comment_date(comment, true) unless comment.posted_with_entry? -%>
<%= comment_url_link(comment) -%>
<%= post_comment_link(comment.entry) if comment.last? %>
          </li>
        <%- end -%>
      <%- end -%>
    </ul>
  <%- end -%>
<%- end -%>
